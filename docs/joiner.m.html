<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>legame.joiner API documentation</title>
    <meta name="description" content="Provides the BroadcastJoiner class, a subclass of Dialog and BroadcastConnector
which returns a Mess..." />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  } 

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; } 

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;
      
      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>


  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">
    <li class="set"><h3><a href="#header-variables">Module variables</a></h3>
      
  <ul>
    <li class="mono"><a href="#legame.joiner.ALIGN_CENTER">ALIGN_CENTER</a></li>
    <li class="mono"><a href="#legame.joiner.ALIGN_LEFT">ALIGN_LEFT</a></li>
    <li class="mono"><a href="#legame.joiner.ALIGN_RIGHT">ALIGN_RIGHT</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-functions">Functions</a></h3>
      
  <ul>
    <li class="mono"><a href="#legame.joiner.get_my_ip">get_my_ip</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#legame.joiner.BroadcastJoiner">BroadcastJoiner</a></span>
        
          
  <ul>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.__init__">__init__</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.addresses">addresses</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.append">append</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.close">close</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.connect">connect</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.dump">dump</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.first_focusable_widget">first_focusable_widget</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.focusable_widget_after">focusable_widget_after</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.focusable_widget_before">focusable_widget_before</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.focusable_widgets">focusable_widgets</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.get_initial_rect">get_initial_rect</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.initialize_display">initialize_display</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.join_threads">join_threads</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.justify_elements">justify_elements</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.last_focusable_widget">last_focusable_widget</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.loop_end">loop_end</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.loop_start">loop_start</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.on_connect">on_connect</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.position_next_element">position_next_element</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.position_rects">position_rects</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.set_caption">set_caption</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.show">show</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.stop_broadcasting">stop_broadcasting</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.widget_at">widget_at</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.widgets">widgets</a></li>
    <li class="mono"><a href="#legame.joiner.BroadcastJoiner.get_my_ip">get_my_ip</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#legame.joiner.DirectJoiner">DirectJoiner</a></span>
        
          
  <ul>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.__init__">__init__</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.append">append</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.client_connect">client_connect</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.close">close</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.disable_widgets">disable_widgets</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.dump">dump</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.first_focusable_widget">first_focusable_widget</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.focusable_widget_after">focusable_widget_after</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.focusable_widget_before">focusable_widget_before</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.focusable_widgets">focusable_widgets</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.get_initial_rect">get_initial_rect</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.initialize_display">initialize_display</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.justify_elements">justify_elements</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.last_focusable_widget">last_focusable_widget</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.loop_end">loop_end</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.loop_start">loop_start</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.mode_select">mode_select</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.position_next_element">position_next_element</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.position_rects">position_rects</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.server_connect">server_connect</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.set_caption">set_caption</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.show">show</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.start">start</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.widget_at">widget_at</a></li>
    <li class="mono"><a href="#legame.joiner.DirectJoiner.widgets">widgets</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#legame.joiner.JoinerDialog">JoinerDialog</a></span>
        
          
  <ul>
    <li class="mono"><a href="#legame.joiner.JoinerDialog.__init__">__init__</a></li>
    <li class="mono"><a href="#legame.joiner.JoinerDialog.append">append</a></li>
    <li class="mono"><a href="#legame.joiner.JoinerDialog.close">close</a></li>
    <li class="mono"><a href="#legame.joiner.JoinerDialog.dump">dump</a></li>
    <li class="mono"><a href="#legame.joiner.JoinerDialog.first_focusable_widget">first_focusable_widget</a></li>
    <li class="mono"><a href="#legame.joiner.JoinerDialog.focusable_widget_after">focusable_widget_after</a></li>
    <li class="mono"><a href="#legame.joiner.JoinerDialog.focusable_widget_before">focusable_widget_before</a></li>
    <li class="mono"><a href="#legame.joiner.JoinerDialog.focusable_widgets">focusable_widgets</a></li>
    <li class="mono"><a href="#legame.joiner.JoinerDialog.get_initial_rect">get_initial_rect</a></li>
    <li class="mono"><a href="#legame.joiner.JoinerDialog.initialize_display">initialize_display</a></li>
    <li class="mono"><a href="#legame.joiner.JoinerDialog.justify_elements">justify_elements</a></li>
    <li class="mono"><a href="#legame.joiner.JoinerDialog.last_focusable_widget">last_focusable_widget</a></li>
    <li class="mono"><a href="#legame.joiner.JoinerDialog.loop_end">loop_end</a></li>
    <li class="mono"><a href="#legame.joiner.JoinerDialog.loop_start">loop_start</a></li>
    <li class="mono"><a href="#legame.joiner.JoinerDialog.position_next_element">position_next_element</a></li>
    <li class="mono"><a href="#legame.joiner.JoinerDialog.position_rects">position_rects</a></li>
    <li class="mono"><a href="#legame.joiner.JoinerDialog.set_caption">set_caption</a></li>
    <li class="mono"><a href="#legame.joiner.JoinerDialog.show">show</a></li>
    <li class="mono"><a href="#legame.joiner.JoinerDialog.widget_at">widget_at</a></li>
    <li class="mono"><a href="#legame.joiner.JoinerDialog.widgets">widgets</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">legame.joiner</span> module</h1>
  <p>Provides the BroadcastJoiner class, a subclass of Dialog and BroadcastConnector
which returns a Messenger object already connected to another player over the
network.</p>
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner" class="source">
    <pre><code>"""
Provides the BroadcastJoiner class, a subclass of Dialog and BroadcastConnector
which returns a Messenger object already connected to another player over the
network.
"""

import importlib, re, threading
from time import time
from socket import socket, AF_INET, SOCK_DGRAM
from pygame_dialog import Dialog, Button, Label, Textbox, Radio, HorizontalLayout, ALIGN_LEFT, ALIGN_CENTER, ALIGN_RIGHT
from cable_car.broadcast_connector import BroadcastConnector
from cable_car.direct_connect import DirectClient, DirectServer
from cable_car.messenger import Messenger


def get_my_ip():
	sock = socket(AF_INET, SOCK_DGRAM)
	sock.connect(('8.8.8.8', 7))
	return sock.getsockname()[0]


class JoinerDialog(Dialog):
	"""
	Base class of dialog which allows the user to connect to another player over the network.
	"""

	transport					= "json"
	caption						= "Select a game to join"
	background_color			= (20,20,80)
	background_color_disabled	= (0,0,40)
	foreground_color			= (180,180,255)
	foreground_color_hover		= (220,220,255)
	shutdown_delay				= 0.5


	def __init__(self, options=None):
		"""
		The "options" argument is expected to be a dictionary, the items of which are
		set as attributes of the game during initialization. Some appropriate key/value
		pairs to pass to the __init__ function would be:

			client
			server
			tcp_port
			udp_port
			transport

		"""
		if options is not None:
			for varname, value in options.__dict__.items():
				setattr(self, varname, value)
		Dialog.__init__(self)
		module = importlib.import_module("cable_car.%s_messages" % self.transport)
		globals().update({ name: module.__dict__[name] for name in module.__dict__})
		Message.register_messages()
		self.statusbar = Label(
			"",
			align = ALIGN_LEFT,
			font_size = 15,
			width = 540,
			foreground_color = self.foreground_color,
			background_color = self.background_color
		)


	def close(self):
		"""
		Override Dialog.close()
		Turn off "_connect_enable" so that connection threads exit.
		Sets up a pause before closing when "shutdown_delay" is not zero.
		"""
		self._connect_enable = False
		self._quitting_time = time() + self.shutdown_delay
		self.loop_end = self._closing


	def _closing(self):
		"""
		Function which replaces "loop_end" when closing JoinerDialog.
		Inserts a pause before killing the main loop, closing the dialog.
		"""
		if time() >= self._quitting_time:
			self._run_loop = False



class BroadcastJoiner(JoinerDialog, BroadcastConnector):
	"""
	A dialog which allows the user to connect to another player over the network by
	sending UDP broadcast messages and listening for connection attempts from
	machines which have received broadcast packets.

	When a connection is made, user and host name is sent to the remote computer.
	This is displayed on the buttons on this dialog, and the user can select one of
	the remote computers by clicking on one of the buttons.

	This class uses the cable_car Messenger class which allows for two different
	types of transport to be used; "json" or "byte". The "json" transport is a lot
	easier to implement, but requires more network bandwidth and may be slow for
	very busy network games. In contrast, the "byte" transport is very lightweight,
	but requires that you write message encoding and decoding routines yourself.

	The default transport is "json", but this can be overridden by defining a class
	variable in a subclass, or by passing "transport=byte" as an option to the
	__init__ function.

	"""

	def __init__(self, options=None):
		JoinerDialog.__init__(self, options)
		self.messengers = []
		self.messenger = None
		self._address_buttons = []
		for idx in range(4):
			button = Button(
				"",
				font_size = 20,
				padding = 12,
				margin = (2,10),
				foreground_color = self.foreground_color,
				foreground_color_hover = self.foreground_color_hover,
				background_color_disabled = self.background_color_disabled,
				background_color = self.background_color,
				click_handler = self._button_click,
				disabled = True,
				index = idx
			)
			self._address_buttons.append(button)
			self.append(button)
		self._address_buttons[0].margin_top = 10
		self.statusbar.text = "Waiting for other players to appear on the network"
		self.append(self.statusbar)
		self.on_connect_function = self.on_connect


	def show(self):
		self.initialize_display()
		self._start_connector_threads()
		self._main_loop()
		self._connect_enable = False
		self.join_threads()


	def on_connect(self, sock):
		"""
		Called when a socket connection is made, creates a new Messenger from new
		socket and appends it to the "messengers" list
		"""
		msgr = Messenger(sock, self.transport)
		# These properties of the Messenger are only relevant when the user
		# is selecting one of many NetworkMessengers, hence are only defined here.
		msgr.remote_user = None
		msgr.remote_hostname = None
		msgr.id_sent = False
		msgr.id_received = False
		msgr.was_invited = False
		msgr.invited_me = False
		msgr.accepted_invitation = False
		self.messengers.append(msgr)


	def loop_end(self):
		"""
		Function called each time through Dialog._main_loop(), updates the buttons,
		statusbar, and messengers.
		"""

		if self._connect_enable:
			# Determine what to display on the associated button:
			for idx in range(len(self.messengers)):
				msgr = self.messengers[idx]
				button = self._address_buttons[idx]
				if msgr.closed:
					button.text = "Connection to %s closed" % (msgr.remote_ip)
					button.disabled = True
					continue
				if not msgr.id_sent:
					button.text = "Connected to %s" % (msgr.remote_ip)
					msgr.send(MsgIdentify())
					msgr.id_sent = True
				msgr.xfer()
				# Handle responses from this Messenger
				message = msgr.get()
				if message is not None:
					if isinstance(message, MsgIdentify):
						msgr.id_received = True
						msgr.remote_hostname = message.hostname
						msgr.remote_user = message.username
						button.text = "%s on %s (click to invite)" % (msgr.remote_user, msgr.remote_hostname)
						button.disabled = False
					elif isinstance(message, MsgJoin):
						if msgr.was_invited:
							# Player which was invited accepted invitation - select
							button.text = "%s on %s accepted!" % (msgr.remote_user, msgr.remote_hostname)
							self._select(msgr)
						else:
							msgr.invited_me = True
							button.text = "%s on %s wants to play (click to accept)" % (msgr.remote_user, msgr.remote_hostname)
					else:
						raise Exception("Messenger received an unexpected message: " + message.__class__.__name__)

		else:
			if self._udp_broadcast_exc is None \
				and self._udp_listen_exc is None \
				and self._tcp_listen_exc is None:
				self.statusbar.text = "Connected." if self.messenger else "Cancelled."
			else:
				errors = []
				if self._udp_broadcast_exc: errors.append("Broadcast: " + self._udp_broadcast_exc.__str__())
				if self._udp_listen_exc: errors.append("Listen: " + self._udp_listen_exc.__str__())
				if self._tcp_listen_exc: errors.append("Socket: " + self._tcp_listen_exc.__str__())
				self.statusbar.text = ", ".join(errors)
			self.close()


	def _button_click(self, button):
		"""
		Click event fired when one of the address listings is clicked.
		"""
		msgr = self.messengers[button.index]
		if msgr.invited_me:
			msgr.send(MsgJoin())
			self._select(msgr)
		elif not msgr.was_invited:
			msgr.send(MsgJoin())
			msgr.was_invited = True
			button.text = "Waiting for %s on %s to accept" % (msgr.remote_user, msgr.remote_hostname)
			button.disabled = True


	def _select(self, messenger):
		"""
		Called when accepting an invitation or the other player accepts an invitation.
		Sets the "messenger" and exits the game joiner.
		"""
		self.messenger = messenger
		for msgr in self.messengers:
			if msgr is not self.messenger:
				msgr.close()
		self.close()



class DirectJoiner(JoinerDialog):


	tcp_port			= 8223		# Port to connect to / listen on
	transport			= "json"	# cable_car transport to use.
	timeout				= None		# Absolute limit on how long to wait.

	__connector			= None		# Instance of DirectClient or DirectServer
	__connect_thread	= None		# Connector thread
	__connect_exc		= None		# Exception raised in self.__connector thread
	__connect_failed	= False


	def __init__(self, options=None):
		JoinerDialog.__init__(self, options)
		self.messenger = None
		self.append(HorizontalLayout(
			Radio("mode", "Client",
				foreground_color = self.foreground_color,
				foreground_color_hover = self.foreground_color_hover,
				background_color_disabled = self.background_color_disabled,
				background_color = self.background_color,
				click_handler = self.mode_select
			),
			Radio("mode", "Server",
				foreground_color = self.foreground_color,
				foreground_color_hover = self.foreground_color_hover,
				background_color_disabled = self.background_color_disabled,
				background_color = self.background_color,
				click_handler = self.mode_select
			)
		))
		self.ip_entry = Textbox(get_my_ip(),
			font_size = 32,
			disabled = True,
			align = ALIGN_CENTER
		)
		self.append(self.ip_entry)
		self.start_button = Button("Connect",
			disabled = True,
			foreground_color = self.foreground_color,
			foreground_color_hover = self.foreground_color_hover,
			background_color_disabled = self.background_color_disabled,
			background_color = self.background_color,
			click_handler = self.start
		)
		self.append(self.start_button)
		self.statusbar.text = "Select the mode (client or server)"
		self.append(self.statusbar)


	def show(self):
		self.initialize_display()
		self._main_loop()
		self._connect_enable = False
		if self.__connect_thread: self.__connect_thread.join()


	def mode_select(self, radio):
		if radio.text == "Client":
			self.ip_entry.enabled = True
			self.start_button.enabled = re.match("^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$", self.ip_entry.text)
		else:
			self.ip_entry.enabled = False
			self.start_button.enabled = True
			self.ip_entry.text = get_my_ip()


	def start(self, pos):
		if Radio.selected_value("mode") == "Client":
			if re.match("^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$", self.ip_entry.text):
				self.disable_widgets()
				self.__connect_thread = threading.Thread(target=self.client_connect)
				self.statusbar.text = "Connecting to %s ..." % self.ip_entry.text
			else:
				self.ip_entry.focus()
				self.statusbar.text = "Enter a valid ip address"
				return
		else:
			self.disable_widgets()
			self.__connect_thread = threading.Thread(target=self.server_connect)
			self.statusbar.text = "Listening for client connection ..."
		self.__connect_thread.start()


	def disable_widgets(self):
		for widget in self.widgets(): widget.disabled = True


	def client_connect(self):
		self.__connect(DirectClient(self.tcp_port, self.ip_entry.text))


	def server_connect(self):
		self.__connect(DirectServer(self.tcp_port, self.ip_entry.text))


	def __connect(self, connector):
		self.__connector = connector
		self.__connector.timeout = self.timeout
		self.__connector.connect()
		if self.__connector.socket is None:
			self.__connect_failed = True
		else:
			self.messenger = Messenger(self.__connector.socket, self.transport)
			self.messenger.id_sent = False
			self.messenger.id_received = False


	def loop_end(self):
		"""
		Function called each time through Dialog._main_loop()
		"""
		if self.messenger:
			if self.messenger.closed:
				self.statusbar.text = "Connection to %s closed" % (self.messenger.remote_ip)
			else:
				if self.messenger.id_sent and self.messenger.id_received:
					self.statusbar.text = "%s at %s connected" % (self.messenger.remote_user, self.messenger.remote_hostname)
					self.close()
				elif not self.messenger.id_sent:
					self.statusbar.text = "Connected to %s" % (self.messenger.remote_ip)
					self.messenger.send(MsgIdentify())
					self.messenger.id_sent = True
				self.messenger.xfer()
				message = self.messenger.get()
				if message is not None:
					if isinstance(message, MsgIdentify):
						self.messenger.id_received = True
						self.messenger.remote_hostname = message.hostname
						self.messenger.remote_user = message.username
					else:
						self.__connector.cancel()
						err = "Messenger received an unexpected message: " + message.__class__.__name__
						logging.error(err)
						self.statusbar.text = err
		elif self.__connect_failed:
			# Only happens when connector thread faults out.
			self.close()




if __name__ == '__main__':
	import argparse, logging, sys

	p = argparse.ArgumentParser()
	p.add_argument("--transport", type=str, default="json")
	p.add_argument("--verbose", "-v", action="store_true", help="Show more detailed debug information")
	p.add_argument("--udp-port", type=int, default=8222)
	p.add_argument("--tcp-port", type=int, default=8223)
	p.add_argument("--direct", "-d", action="store_true", help="Connect to a remote machine by ip address instead of using udp broadcast discovery.")
	options = p.parse_args()

	logging.basicConfig(
		stream=sys.stdout,
		level=logging.DEBUG if options.verbose else logging.ERROR,
		format="%(relativeCreated)6d [%(filename)24s:%(lineno)3d] %(message)s"
	)

	if options.direct:

		joiner = DirectJoiner(options)
		joiner.shutdown_delay = 0.5
		joiner.timeout = 15.0
		joiner.show()

	else:

		joiner = BroadcastJoiner(options)
		joiner.shutdown_delay = 0.5
		joiner.timeout = 15.0
		joiner.show()

		print("Addresses:")
		print(joiner.addresses())
		print("Messengers:")
		print([messenger.remote_ip for messenger in joiner.messengers])

	print("Selected:")
	print(joiner.messenger.remote_ip if joiner.messenger else None)


</code></pre>
  </div>

  </header>

  <section id="section-items">
    <h2 class="section-title" id="header-variables">Module variables</h2>
      <div class="item">
      <p id="legame.joiner.ALIGN_CENTER" class="name">var <span class="ident">ALIGN_CENTER</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="legame.joiner.ALIGN_LEFT" class="name">var <span class="ident">ALIGN_LEFT</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="legame.joiner.ALIGN_RIGHT" class="name">var <span class="ident">ALIGN_RIGHT</span></p>
      
  
  <div class="source_cont">
</div>

      </div>

    <h2 class="section-title" id="header-functions">Functions</h2>
      
  <div class="item">
    <div class="name def" id="legame.joiner.get_my_ip">
    <p>def <span class="ident">get_my_ip</span>(</p><p>)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.get_my_ip', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.get_my_ip" class="source">
    <pre><code>def get_my_ip():
	sock = socket(AF_INET, SOCK_DGRAM)
	sock.connect(('8.8.8.8', 7))
	return sock.getsockname()[0]
</code></pre>
  </div>
</div>

  </div>
  

    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="legame.joiner.BroadcastJoiner" class="name">class <span class="ident">BroadcastJoiner</span></p>
      
  
    <div class="desc"><p>A dialog which allows the user to connect to another player over the network by
sending UDP broadcast messages and listening for connection attempts from
machines which have received broadcast packets.</p>
<p>When a connection is made, user and host name is sent to the remote computer.
This is displayed on the buttons on this dialog, and the user can select one of
the remote computers by clicking on one of the buttons.</p>
<p>This class uses the cable_car Messenger class which allows for two different
types of transport to be used; "json" or "byte". The "json" transport is a lot
easier to implement, but requires more network bandwidth and may be slow for
very busy network games. In contrast, the "byte" transport is very lightweight,
but requires that you write message encoding and decoding routines yourself.</p>
<p>The default transport is "json", but this can be overridden by defining a class
variable in a subclass, or by passing "transport=byte" as an option to the
<strong>init</strong> function.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner" class="source">
    <pre><code>class BroadcastJoiner(JoinerDialog, BroadcastConnector):
	"""
	A dialog which allows the user to connect to another player over the network by
	sending UDP broadcast messages and listening for connection attempts from
	machines which have received broadcast packets.

	When a connection is made, user and host name is sent to the remote computer.
	This is displayed on the buttons on this dialog, and the user can select one of
	the remote computers by clicking on one of the buttons.

	This class uses the cable_car Messenger class which allows for two different
	types of transport to be used; "json" or "byte". The "json" transport is a lot
	easier to implement, but requires more network bandwidth and may be slow for
	very busy network games. In contrast, the "byte" transport is very lightweight,
	but requires that you write message encoding and decoding routines yourself.

	The default transport is "json", but this can be overridden by defining a class
	variable in a subclass, or by passing "transport=byte" as an option to the
	__init__ function.

	"""

	def __init__(self, options=None):
		JoinerDialog.__init__(self, options)
		self.messengers = []
		self.messenger = None
		self._address_buttons = []
		for idx in range(4):
			button = Button(
				"",
				font_size = 20,
				padding = 12,
				margin = (2,10),
				foreground_color = self.foreground_color,
				foreground_color_hover = self.foreground_color_hover,
				background_color_disabled = self.background_color_disabled,
				background_color = self.background_color,
				click_handler = self._button_click,
				disabled = True,
				index = idx
			)
			self._address_buttons.append(button)
			self.append(button)
		self._address_buttons[0].margin_top = 10
		self.statusbar.text = "Waiting for other players to appear on the network"
		self.append(self.statusbar)
		self.on_connect_function = self.on_connect


	def show(self):
		self.initialize_display()
		self._start_connector_threads()
		self._main_loop()
		self._connect_enable = False
		self.join_threads()


	def on_connect(self, sock):
		"""
		Called when a socket connection is made, creates a new Messenger from new
		socket and appends it to the "messengers" list
		"""
		msgr = Messenger(sock, self.transport)
		# These properties of the Messenger are only relevant when the user
		# is selecting one of many NetworkMessengers, hence are only defined here.
		msgr.remote_user = None
		msgr.remote_hostname = None
		msgr.id_sent = False
		msgr.id_received = False
		msgr.was_invited = False
		msgr.invited_me = False
		msgr.accepted_invitation = False
		self.messengers.append(msgr)


	def loop_end(self):
		"""
		Function called each time through Dialog._main_loop(), updates the buttons,
		statusbar, and messengers.
		"""

		if self._connect_enable:
			# Determine what to display on the associated button:
			for idx in range(len(self.messengers)):
				msgr = self.messengers[idx]
				button = self._address_buttons[idx]
				if msgr.closed:
					button.text = "Connection to %s closed" % (msgr.remote_ip)
					button.disabled = True
					continue
				if not msgr.id_sent:
					button.text = "Connected to %s" % (msgr.remote_ip)
					msgr.send(MsgIdentify())
					msgr.id_sent = True
				msgr.xfer()
				# Handle responses from this Messenger
				message = msgr.get()
				if message is not None:
					if isinstance(message, MsgIdentify):
						msgr.id_received = True
						msgr.remote_hostname = message.hostname
						msgr.remote_user = message.username
						button.text = "%s on %s (click to invite)" % (msgr.remote_user, msgr.remote_hostname)
						button.disabled = False
					elif isinstance(message, MsgJoin):
						if msgr.was_invited:
							# Player which was invited accepted invitation - select
							button.text = "%s on %s accepted!" % (msgr.remote_user, msgr.remote_hostname)
							self._select(msgr)
						else:
							msgr.invited_me = True
							button.text = "%s on %s wants to play (click to accept)" % (msgr.remote_user, msgr.remote_hostname)
					else:
						raise Exception("Messenger received an unexpected message: " + message.__class__.__name__)

		else:
			if self._udp_broadcast_exc is None \
				and self._udp_listen_exc is None \
				and self._tcp_listen_exc is None:
				self.statusbar.text = "Connected." if self.messenger else "Cancelled."
			else:
				errors = []
				if self._udp_broadcast_exc: errors.append("Broadcast: " + self._udp_broadcast_exc.__str__())
				if self._udp_listen_exc: errors.append("Listen: " + self._udp_listen_exc.__str__())
				if self._tcp_listen_exc: errors.append("Socket: " + self._tcp_listen_exc.__str__())
				self.statusbar.text = ", ".join(errors)
			self.close()


	def _button_click(self, button):
		"""
		Click event fired when one of the address listings is clicked.
		"""
		msgr = self.messengers[button.index]
		if msgr.invited_me:
			msgr.send(MsgJoin())
			self._select(msgr)
		elif not msgr.was_invited:
			msgr.send(MsgJoin())
			msgr.was_invited = True
			button.text = "Waiting for %s on %s to accept" % (msgr.remote_user, msgr.remote_hostname)
			button.disabled = True


	def _select(self, messenger):
		"""
		Called when accepting an invitation or the other player accepts an invitation.
		Sets the "messenger" and exits the game joiner.
		"""
		self.messenger = messenger
		for msgr in self.messengers:
			if msgr is not self.messenger:
				msgr.close()
		self.close()
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#legame.joiner.BroadcastJoiner">BroadcastJoiner</a></li>
          <li><a href="#legame.joiner.JoinerDialog">JoinerDialog</a></li>
          <li>pygame_dialog.pygame_dialog.Dialog</li>
          <li>pygame_dialog.pygame_dialog.VerticalLayout</li>
          <li>pygame_dialog.pygame_dialog.LinearLayout</li>
          <li>pygame_dialog.pygame_dialog.Layout</li>
          <li>cable_car.broadcast_connector.BroadcastConnector</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="legame.joiner.BroadcastJoiner.allow_loopback" class="name">var <span class="ident">allow_loopback</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.BroadcastJoiner.background_color" class="name">var <span class="ident">background_color</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.BroadcastJoiner.background_color_disabled" class="name">var <span class="ident">background_color_disabled</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.BroadcastJoiner.broadcast_interval" class="name">var <span class="ident">broadcast_interval</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.BroadcastJoiner.caption" class="name">var <span class="ident">caption</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.BroadcastJoiner.foreground_color" class="name">var <span class="ident">foreground_color</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.BroadcastJoiner.foreground_color_hover" class="name">var <span class="ident">foreground_color_hover</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.BroadcastJoiner.local_ip" class="name">var <span class="ident">local_ip</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.BroadcastJoiner.rect" class="name">var <span class="ident">rect</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.BroadcastJoiner.shutdown_delay" class="name">var <span class="ident">shutdown_delay</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.BroadcastJoiner.sockets" class="name">var <span class="ident">sockets</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.BroadcastJoiner.tcp_connect_timeout" class="name">var <span class="ident">tcp_connect_timeout</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.BroadcastJoiner.tcp_port" class="name">var <span class="ident">tcp_port</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.BroadcastJoiner.timeout" class="name">var <span class="ident">timeout</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.BroadcastJoiner.transport" class="name">var <span class="ident">transport</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.BroadcastJoiner.udp_port" class="name">var <span class="ident">udp_port</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>The "options" argument is expected to be a dictionary, the items of which are
set as attributes of the game during initialization. Some appropriate key/value
pairs to pass to the <strong>init</strong> function would be:</p>
<pre><code>    client
    server
    tcp_port
    udp_port
    transport
</code></pre></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.__init__', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.__init__" class="source">
    <pre><code>def __init__(self, options=None):
	JoinerDialog.__init__(self, options)
	self.messengers = []
	self.messenger = None
	self._address_buttons = []
	for idx in range(4):
		button = Button(
			"",
			font_size = 20,
			padding = 12,
			margin = (2,10),
			foreground_color = self.foreground_color,
			foreground_color_hover = self.foreground_color_hover,
			background_color_disabled = self.background_color_disabled,
			background_color = self.background_color,
			click_handler = self._button_click,
			disabled = True,
			index = idx
		)
		self._address_buttons.append(button)
		self.append(button)
	self._address_buttons[0].margin_top = 10
	self.statusbar.text = "Waiting for other players to appear on the network"
	self.append(self.statusbar)
	self.on_connect_function = self.on_connect
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.addresses">
    <p>def <span class="ident">addresses</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a list of ip addresses of computers connected.
Only valid after broadcasting has started, and really only valid after
broadcasting is complete.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.addresses', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.addresses" class="source">
    <pre><code>def addresses(self):
	"""
	Returns a list of ip addresses of computers connected.
	Only valid after broadcasting has started, and really only valid after
	broadcasting is complete.
	"""
	return self.sockets.keys()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.append">
    <p>def <span class="ident">append</span>(</p><p>self, arg)</p>
    </div>
    

    
  
    <div class="desc"><p>Add a Widget or Layout to this LinearLayout.
Returns this LinearLayout.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.append', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.append" class="source">
    <pre><code>def append(self, arg):
	"""
	Add a Widget or Layout to this LinearLayout.
	Returns this LinearLayout.
	"""
	self.elements.append(arg)
	return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.close">
    <p>def <span class="ident">close</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Override Dialog.close()
Turn off "_connect_enable" so that connection threads exit.
Sets up a pause before closing when "shutdown_delay" is not zero.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.close', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.close" class="source">
    <pre><code>def close(self):
	"""
	Override Dialog.close()
	Turn off "_connect_enable" so that connection threads exit.
	Sets up a pause before closing when "shutdown_delay" is not zero.
	"""
	self._connect_enable = False
	self._quitting_time = time() + self.shutdown_delay
	self.loop_end = self._closing
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.connect">
    <p>def <span class="ident">connect</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Blocking function which starts broadcast/listen and waits for threads to exit.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.connect', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.connect" class="source">
    <pre><code>def connect(self):
	"""
	Blocking function which starts broadcast/listen and waits for threads to exit.
	"""
	self._start_connector_threads()
	# Wait for threads to exit:
	self.join_threads()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.dump">
    <p>def <span class="ident">dump</span>(</p><p>self, indent=0)</p>
    </div>
    

    
  
    <div class="desc"><p>Print this layout's element tree for debugging.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.dump', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.dump" class="source">
    <pre><code>def dump(self, indent=0):
	"""
	Print this layout's element tree for debugging.
	"""
	if self.rect is None:
		self.get_initial_rect()
		self.justify_elements()
		self.position_rects()
	super(Dialog, self).dump(indent)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.first_focusable_widget">
    <p>def <span class="ident">first_focusable_widget</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the first Widget, irrespective of container.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.first_focusable_widget', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.first_focusable_widget" class="source">
    <pre><code>def first_focusable_widget(self):
	"""
	Returns the first Widget, irrespective of container.
	"""
	for e in self.focusable_widgets(): return e
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.focusable_widget_after">
    <p>def <span class="ident">focusable_widget_after</span>(</p><p>self, widget)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the Widget following widget, irrespective of container.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.focusable_widget_after', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.focusable_widget_after" class="source">
    <pre><code>def focusable_widget_after(self, widget):
	"""
	Returns the Widget following widget, irrespective of container.
	"""
	elem_found = False
	for e in self.focusable_widgets():
		if elem_found:
			return e
		elif e is widget:
			elem_found = True
	return None
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.focusable_widget_before">
    <p>def <span class="ident">focusable_widget_before</span>(</p><p>self, widget)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the Widget preceeding widget, irrespective of container.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.focusable_widget_before', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.focusable_widget_before" class="source">
    <pre><code>def focusable_widget_before(self, widget):
	"""
	Returns the Widget preceeding widget, irrespective of container.
	"""
	prev = None
	for e in self.focusable_widgets():
		if e is widget:
			return prev
		prev = e
	return None
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.focusable_widgets">
    <p>def <span class="ident">focusable_widgets</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a list of widgets contained in this layout which may receieve the focus.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.focusable_widgets', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.focusable_widgets" class="source">
    <pre><code>def focusable_widgets(self):
	"""
	Returns a list of widgets contained in this layout which may receieve the focus.
	"""
	return filter(lambda elem: not isinstance(elem, Label) and not elem.disabled, self.widgets())
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.get_initial_rect">
    <p>def <span class="ident">get_initial_rect</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Determine the minimum space necessary for this element and its' contained elements.
Returns Rect</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.get_initial_rect', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.get_initial_rect" class="source">
    <pre><code>def get_initial_rect(self):
	"""
	Determine the minimum space necessary for this element and its' contained elements.
	Returns Rect
	"""
	VerticalLayout.get_initial_rect(self)
	self.rect.left = self.margin_left
	self.rect.top = self.margin_top
	return self.rect
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.initialize_display">
    <p>def <span class="ident">initialize_display</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize the pygame display and do initial render.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.initialize_display', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.initialize_display" class="source">
    <pre><code>def initialize_display(self):
	"""
	Initialize the pygame display and do initial render.
	"""
	display.init()
	self.rect = self.get_initial_rect()
	self.screen_rect = Rect((0, 0,
		self.rect.width + self.margin_left + self.margin_right,
		self.rect.height + self.margin_top + self.margin_bottom
	))
	os.environ['SDL_VIDEO_CENTERED'] = '1'
	self.screen = display.set_mode(self.screen_rect.size)
	self.screen.fill(self.background_color)
	display.set_caption(self.caption)
	self.justify_elements()
	self.position_rects()
	for widget in self.widgets():
		self.screen.blit(widget.get_surface(), widget.rect)
	display.update()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.join_threads">
    <p>def <span class="ident">join_threads</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Wait for all threads to exit normally.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.join_threads', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.join_threads" class="source">
    <pre><code>def join_threads(self):
	"""
	Wait for all threads to exit normally.
	"""
	try:
		self.__udp_broadcast_thread.join()
		self.__udp_listen_thread.join()
		self.__tcp_listen_thread.join()
		if self.timeout:
			self.__timeout_thread.join()
	except KeyboardInterrupt:
		self._connect_enable = False
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.justify_elements">
    <p>def <span class="ident">justify_elements</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Expand the area allowed to each element so that they fill available space.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.justify_elements', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.justify_elements" class="source">
    <pre><code>def justify_elements(self):
	"""
	Expand the area allowed to each element so that they fill available space.
	"""
	content_height = sum(element.rect.height for element in self.elements)
	target_content_height = self.rect.height - self.__internal_margins
	grow_factor = float(target_content_height) / float(content_height)
	for element in self.elements:
		element.rect.width = self.rect.width
		element.rect.height = round(element.rect.height * grow_factor)
		if isinstance(element, Layout): element.justify_elements()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.last_focusable_widget">
    <p>def <span class="ident">last_focusable_widget</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the last Widget, irrespective of container.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.last_focusable_widget', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.last_focusable_widget" class="source">
    <pre><code>def last_focusable_widget(self):
	"""
	Returns the last Widget, irrespective of container.
	"""
	for e in self.focusable_widgets(): pass
	return e
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.loop_end">
    <p>def <span class="ident">loop_end</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Function called each time through Dialog._main_loop(), updates the buttons,
statusbar, and messengers.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.loop_end', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.loop_end" class="source">
    <pre><code>def loop_end(self):
	"""
	Function called each time through Dialog._main_loop(), updates the buttons,
	statusbar, and messengers.
	"""
	if self._connect_enable:
		# Determine what to display on the associated button:
		for idx in range(len(self.messengers)):
			msgr = self.messengers[idx]
			button = self._address_buttons[idx]
			if msgr.closed:
				button.text = "Connection to %s closed" % (msgr.remote_ip)
				button.disabled = True
				continue
			if not msgr.id_sent:
				button.text = "Connected to %s" % (msgr.remote_ip)
				msgr.send(MsgIdentify())
				msgr.id_sent = True
			msgr.xfer()
			# Handle responses from this Messenger
			message = msgr.get()
			if message is not None:
				if isinstance(message, MsgIdentify):
					msgr.id_received = True
					msgr.remote_hostname = message.hostname
					msgr.remote_user = message.username
					button.text = "%s on %s (click to invite)" % (msgr.remote_user, msgr.remote_hostname)
					button.disabled = False
				elif isinstance(message, MsgJoin):
					if msgr.was_invited:
						# Player which was invited accepted invitation - select
						button.text = "%s on %s accepted!" % (msgr.remote_user, msgr.remote_hostname)
						self._select(msgr)
					else:
						msgr.invited_me = True
						button.text = "%s on %s wants to play (click to accept)" % (msgr.remote_user, msgr.remote_hostname)
				else:
					raise Exception("Messenger received an unexpected message: " + message.__class__.__name__)
	else:
		if self._udp_broadcast_exc is None \
			and self._udp_listen_exc is None \
			and self._tcp_listen_exc is None:
			self.statusbar.text = "Connected." if self.messenger else "Cancelled."
		else:
			errors = []
			if self._udp_broadcast_exc: errors.append("Broadcast: " + self._udp_broadcast_exc.__str__())
			if self._udp_listen_exc: errors.append("Listen: " + self._udp_listen_exc.__str__())
			if self._tcp_listen_exc: errors.append("Socket: " + self._tcp_listen_exc.__str__())
			self.statusbar.text = ", ".join(errors)
		self.close()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.loop_start">
    <p>def <span class="ident">loop_start</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Called at the beginning of _main_loop() each time through, before processing events.
The event loop looks like this:
1. loop_start()                              &lt;-- you are here
2. event handling (keyboard, mouse, timers)
3. loop_end()
4. repaint the dialog
5. update the display</p>
<p>This function does nothing, and is meant for being overriden by a subclass.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.loop_start', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.loop_start" class="source">
    <pre><code>def loop_start(self):
	"""
	Called at the beginning of _main_loop() each time through, before processing events.
	The event loop looks like this:
	1. loop_start()                              <-- you are here
	2. event handling (keyboard, mouse, timers)
	3. loop_end()
	4. repaint the dialog
	5. update the display
	This function does nothing, and is meant for being overriden by a subclass.
	"""
	pass
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.on_connect">
    <p>def <span class="ident">on_connect</span>(</p><p>self, sock)</p>
    </div>
    

    
  
    <div class="desc"><p>Called when a socket connection is made, creates a new Messenger from new
socket and appends it to the "messengers" list</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.on_connect', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.on_connect" class="source">
    <pre><code>def on_connect(self, sock):
	"""
	Called when a socket connection is made, creates a new Messenger from new
	socket and appends it to the "messengers" list
	"""
	msgr = Messenger(sock, self.transport)
	# These properties of the Messenger are only relevant when the user
	# is selecting one of many NetworkMessengers, hence are only defined here.
	msgr.remote_user = None
	msgr.remote_hostname = None
	msgr.id_sent = False
	msgr.id_received = False
	msgr.was_invited = False
	msgr.invited_me = False
	msgr.accepted_invitation = False
	self.messengers.append(msgr)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.position_next_element">
    <p>def <span class="ident">position_next_element</span>(</p><p>self, prev_element, next_elem)</p>
    </div>
    

    
  
    <div class="desc"><p>Shift next_elem's rect by the height of prev_element's rect, plus margin.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.position_next_element', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.position_next_element" class="source">
    <pre><code>def position_next_element(self, prev_element, next_elem):
	"""
	Shift next_elem's rect by the height of prev_element's rect, plus margin.
	"""
	next_elem.rect.top = prev_element.rect.top + prev_element.rect.height + \
		max(prev_element.margin_bottom, next_elem.margin_top)
	next_elem.rect.left = prev_element.rect.left
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.position_rects">
    <p>def <span class="ident">position_rects</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the final top, left position of contained elements.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.position_rects', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.position_rects" class="source">
    <pre><code>def position_rects(self):
	"""
	Set the final top, left position of contained elements.
	"""
	prev_elem = self.elements[0]
	prev_elem.rect.top = self.rect.top
	prev_elem.rect.left = self.rect.left
	for next_elem in self.elements[1:]:
		self.position_next_element(prev_elem, next_elem)
		prev_elem = next_elem
	for element in self.elements:
		if isinstance(element, Layout):
			element.position_rects()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.set_caption">
    <p>def <span class="ident">set_caption</span>(</p><p>self, caption)</p>
    </div>
    

    
  
    <div class="desc"><p>Sets the window caption.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.set_caption', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.set_caption" class="source">
    <pre><code>def set_caption(self, caption):
	"""
	Sets the window caption.
	"""
	self.caption = caption
	return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.show">
    <p>def <span class="ident">show</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize the display and enter the event loop.
The display is destroyed when this function exits.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.show', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.show" class="source">
    <pre><code>def show(self):
	self.initialize_display()
	self._start_connector_threads()
	self._main_loop()
	self._connect_enable = False
	self.join_threads()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.stop_broadcasting">
    <p>def <span class="ident">stop_broadcasting</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Stop both broadcasting and listening by setting the "_connect_enable" flag False.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.stop_broadcasting', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.stop_broadcasting" class="source">
    <pre><code>def stop_broadcasting(self):
	"""
	Stop both broadcasting and listening by setting the "_connect_enable" flag False.
	"""
	self._connect_enable = False
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.widget_at">
    <p>def <span class="ident">widget_at</span>(</p><p>self, pos)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the Widget at the given screen position (which is usually the mouse position).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.widget_at', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.widget_at" class="source">
    <pre><code>def widget_at(self, pos):
	"""
	Returns the Widget at the given screen position (which is usually the mouse position).
	"""
	for element in self.elements:
		if element.rect.collidepoint(pos):
			return element if isinstance(element, Widget) else element.widget_at(pos)
	return None
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.widgets">
    <p>def <span class="ident">widgets</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>A generator function which yields all the Widget instances contained in this Layout.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.widgets', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.widgets" class="source">
    <pre><code>def widgets(self):
	"""
	A generator function which yields all the Widget instances contained in this Layout.
	"""
	for elem_a in self.elements:
		if isinstance(elem_a, Layout):
			for elem_b in elem_a.widgets():
				yield elem_b
		else:
			yield elem_a
</code></pre>
  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="legame.joiner.BroadcastJoiner.messenger" class="name">var <span class="ident">messenger</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.BroadcastJoiner.messengers" class="name">var <span class="ident">messengers</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.BroadcastJoiner.on_connect_function" class="name">var <span class="ident">on_connect_function</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="legame.joiner.BroadcastJoiner.get_my_ip">
    <p>def <span class="ident">get_my_ip</span>(</p><p>cls)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.BroadcastJoiner.get_my_ip', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.BroadcastJoiner.get_my_ip" class="source">
    <pre><code>@classmethod
def get_my_ip(cls):
	sock = socket(AF_INET, SOCK_DGRAM)
	sock.connect(('8.8.8.8', 7))
	return sock.getsockname()[0]
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="legame.joiner.DirectJoiner" class="name">class <span class="ident">DirectJoiner</span></p>
      
  
    <div class="desc"><p>Base class of dialog which allows the user to connect to another player over the network.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner" class="source">
    <pre><code>class DirectJoiner(JoinerDialog):


	tcp_port			= 8223		# Port to connect to / listen on
	transport			= "json"	# cable_car transport to use.
	timeout				= None		# Absolute limit on how long to wait.

	__connector			= None		# Instance of DirectClient or DirectServer
	__connect_thread	= None		# Connector thread
	__connect_exc		= None		# Exception raised in self.__connector thread
	__connect_failed	= False


	def __init__(self, options=None):
		JoinerDialog.__init__(self, options)
		self.messenger = None
		self.append(HorizontalLayout(
			Radio("mode", "Client",
				foreground_color = self.foreground_color,
				foreground_color_hover = self.foreground_color_hover,
				background_color_disabled = self.background_color_disabled,
				background_color = self.background_color,
				click_handler = self.mode_select
			),
			Radio("mode", "Server",
				foreground_color = self.foreground_color,
				foreground_color_hover = self.foreground_color_hover,
				background_color_disabled = self.background_color_disabled,
				background_color = self.background_color,
				click_handler = self.mode_select
			)
		))
		self.ip_entry = Textbox(get_my_ip(),
			font_size = 32,
			disabled = True,
			align = ALIGN_CENTER
		)
		self.append(self.ip_entry)
		self.start_button = Button("Connect",
			disabled = True,
			foreground_color = self.foreground_color,
			foreground_color_hover = self.foreground_color_hover,
			background_color_disabled = self.background_color_disabled,
			background_color = self.background_color,
			click_handler = self.start
		)
		self.append(self.start_button)
		self.statusbar.text = "Select the mode (client or server)"
		self.append(self.statusbar)


	def show(self):
		self.initialize_display()
		self._main_loop()
		self._connect_enable = False
		if self.__connect_thread: self.__connect_thread.join()


	def mode_select(self, radio):
		if radio.text == "Client":
			self.ip_entry.enabled = True
			self.start_button.enabled = re.match("^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$", self.ip_entry.text)
		else:
			self.ip_entry.enabled = False
			self.start_button.enabled = True
			self.ip_entry.text = get_my_ip()


	def start(self, pos):
		if Radio.selected_value("mode") == "Client":
			if re.match("^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$", self.ip_entry.text):
				self.disable_widgets()
				self.__connect_thread = threading.Thread(target=self.client_connect)
				self.statusbar.text = "Connecting to %s ..." % self.ip_entry.text
			else:
				self.ip_entry.focus()
				self.statusbar.text = "Enter a valid ip address"
				return
		else:
			self.disable_widgets()
			self.__connect_thread = threading.Thread(target=self.server_connect)
			self.statusbar.text = "Listening for client connection ..."
		self.__connect_thread.start()


	def disable_widgets(self):
		for widget in self.widgets(): widget.disabled = True


	def client_connect(self):
		self.__connect(DirectClient(self.tcp_port, self.ip_entry.text))


	def server_connect(self):
		self.__connect(DirectServer(self.tcp_port, self.ip_entry.text))


	def __connect(self, connector):
		self.__connector = connector
		self.__connector.timeout = self.timeout
		self.__connector.connect()
		if self.__connector.socket is None:
			self.__connect_failed = True
		else:
			self.messenger = Messenger(self.__connector.socket, self.transport)
			self.messenger.id_sent = False
			self.messenger.id_received = False


	def loop_end(self):
		"""
		Function called each time through Dialog._main_loop()
		"""
		if self.messenger:
			if self.messenger.closed:
				self.statusbar.text = "Connection to %s closed" % (self.messenger.remote_ip)
			else:
				if self.messenger.id_sent and self.messenger.id_received:
					self.statusbar.text = "%s at %s connected" % (self.messenger.remote_user, self.messenger.remote_hostname)
					self.close()
				elif not self.messenger.id_sent:
					self.statusbar.text = "Connected to %s" % (self.messenger.remote_ip)
					self.messenger.send(MsgIdentify())
					self.messenger.id_sent = True
				self.messenger.xfer()
				message = self.messenger.get()
				if message is not None:
					if isinstance(message, MsgIdentify):
						self.messenger.id_received = True
						self.messenger.remote_hostname = message.hostname
						self.messenger.remote_user = message.username
					else:
						self.__connector.cancel()
						err = "Messenger received an unexpected message: " + message.__class__.__name__
						logging.error(err)
						self.statusbar.text = err
		elif self.__connect_failed:
			# Only happens when connector thread faults out.
			self.close()
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#legame.joiner.DirectJoiner">DirectJoiner</a></li>
          <li><a href="#legame.joiner.JoinerDialog">JoinerDialog</a></li>
          <li>pygame_dialog.pygame_dialog.Dialog</li>
          <li>pygame_dialog.pygame_dialog.VerticalLayout</li>
          <li>pygame_dialog.pygame_dialog.LinearLayout</li>
          <li>pygame_dialog.pygame_dialog.Layout</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="legame.joiner.DirectJoiner.background_color" class="name">var <span class="ident">background_color</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.DirectJoiner.background_color_disabled" class="name">var <span class="ident">background_color_disabled</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.DirectJoiner.caption" class="name">var <span class="ident">caption</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.DirectJoiner.foreground_color" class="name">var <span class="ident">foreground_color</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.DirectJoiner.foreground_color_hover" class="name">var <span class="ident">foreground_color_hover</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.DirectJoiner.rect" class="name">var <span class="ident">rect</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.DirectJoiner.shutdown_delay" class="name">var <span class="ident">shutdown_delay</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.DirectJoiner.tcp_port" class="name">var <span class="ident">tcp_port</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.DirectJoiner.timeout" class="name">var <span class="ident">timeout</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.DirectJoiner.transport" class="name">var <span class="ident">transport</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>The "options" argument is expected to be a dictionary, the items of which are
set as attributes of the game during initialization. Some appropriate key/value
pairs to pass to the <strong>init</strong> function would be:</p>
<pre><code>    client
    server
    tcp_port
    udp_port
    transport
</code></pre></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.__init__', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.__init__" class="source">
    <pre><code>def __init__(self, options=None):
	JoinerDialog.__init__(self, options)
	self.messenger = None
	self.append(HorizontalLayout(
		Radio("mode", "Client",
			foreground_color = self.foreground_color,
			foreground_color_hover = self.foreground_color_hover,
			background_color_disabled = self.background_color_disabled,
			background_color = self.background_color,
			click_handler = self.mode_select
		),
		Radio("mode", "Server",
			foreground_color = self.foreground_color,
			foreground_color_hover = self.foreground_color_hover,
			background_color_disabled = self.background_color_disabled,
			background_color = self.background_color,
			click_handler = self.mode_select
		)
	))
	self.ip_entry = Textbox(get_my_ip(),
		font_size = 32,
		disabled = True,
		align = ALIGN_CENTER
	)
	self.append(self.ip_entry)
	self.start_button = Button("Connect",
		disabled = True,
		foreground_color = self.foreground_color,
		foreground_color_hover = self.foreground_color_hover,
		background_color_disabled = self.background_color_disabled,
		background_color = self.background_color,
		click_handler = self.start
	)
	self.append(self.start_button)
	self.statusbar.text = "Select the mode (client or server)"
	self.append(self.statusbar)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.append">
    <p>def <span class="ident">append</span>(</p><p>self, arg)</p>
    </div>
    

    
  
    <div class="desc"><p>Add a Widget or Layout to this LinearLayout.
Returns this LinearLayout.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.append', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.append" class="source">
    <pre><code>def append(self, arg):
	"""
	Add a Widget or Layout to this LinearLayout.
	Returns this LinearLayout.
	"""
	self.elements.append(arg)
	return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.client_connect">
    <p>def <span class="ident">client_connect</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.client_connect', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.client_connect" class="source">
    <pre><code>def client_connect(self):
	self.__connect(DirectClient(self.tcp_port, self.ip_entry.text))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.close">
    <p>def <span class="ident">close</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Override Dialog.close()
Turn off "_connect_enable" so that connection threads exit.
Sets up a pause before closing when "shutdown_delay" is not zero.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.close', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.close" class="source">
    <pre><code>def close(self):
	"""
	Override Dialog.close()
	Turn off "_connect_enable" so that connection threads exit.
	Sets up a pause before closing when "shutdown_delay" is not zero.
	"""
	self._connect_enable = False
	self._quitting_time = time() + self.shutdown_delay
	self.loop_end = self._closing
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.disable_widgets">
    <p>def <span class="ident">disable_widgets</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.disable_widgets', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.disable_widgets" class="source">
    <pre><code>def disable_widgets(self):
	for widget in self.widgets(): widget.disabled = True
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.dump">
    <p>def <span class="ident">dump</span>(</p><p>self, indent=0)</p>
    </div>
    

    
  
    <div class="desc"><p>Print this layout's element tree for debugging.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.dump', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.dump" class="source">
    <pre><code>def dump(self, indent=0):
	"""
	Print this layout's element tree for debugging.
	"""
	if self.rect is None:
		self.get_initial_rect()
		self.justify_elements()
		self.position_rects()
	super(Dialog, self).dump(indent)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.first_focusable_widget">
    <p>def <span class="ident">first_focusable_widget</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the first Widget, irrespective of container.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.first_focusable_widget', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.first_focusable_widget" class="source">
    <pre><code>def first_focusable_widget(self):
	"""
	Returns the first Widget, irrespective of container.
	"""
	for e in self.focusable_widgets(): return e
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.focusable_widget_after">
    <p>def <span class="ident">focusable_widget_after</span>(</p><p>self, widget)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the Widget following widget, irrespective of container.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.focusable_widget_after', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.focusable_widget_after" class="source">
    <pre><code>def focusable_widget_after(self, widget):
	"""
	Returns the Widget following widget, irrespective of container.
	"""
	elem_found = False
	for e in self.focusable_widgets():
		if elem_found:
			return e
		elif e is widget:
			elem_found = True
	return None
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.focusable_widget_before">
    <p>def <span class="ident">focusable_widget_before</span>(</p><p>self, widget)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the Widget preceeding widget, irrespective of container.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.focusable_widget_before', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.focusable_widget_before" class="source">
    <pre><code>def focusable_widget_before(self, widget):
	"""
	Returns the Widget preceeding widget, irrespective of container.
	"""
	prev = None
	for e in self.focusable_widgets():
		if e is widget:
			return prev
		prev = e
	return None
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.focusable_widgets">
    <p>def <span class="ident">focusable_widgets</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a list of widgets contained in this layout which may receieve the focus.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.focusable_widgets', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.focusable_widgets" class="source">
    <pre><code>def focusable_widgets(self):
	"""
	Returns a list of widgets contained in this layout which may receieve the focus.
	"""
	return filter(lambda elem: not isinstance(elem, Label) and not elem.disabled, self.widgets())
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.get_initial_rect">
    <p>def <span class="ident">get_initial_rect</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Determine the minimum space necessary for this element and its' contained elements.
Returns Rect</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.get_initial_rect', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.get_initial_rect" class="source">
    <pre><code>def get_initial_rect(self):
	"""
	Determine the minimum space necessary for this element and its' contained elements.
	Returns Rect
	"""
	VerticalLayout.get_initial_rect(self)
	self.rect.left = self.margin_left
	self.rect.top = self.margin_top
	return self.rect
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.initialize_display">
    <p>def <span class="ident">initialize_display</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize the pygame display and do initial render.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.initialize_display', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.initialize_display" class="source">
    <pre><code>def initialize_display(self):
	"""
	Initialize the pygame display and do initial render.
	"""
	display.init()
	self.rect = self.get_initial_rect()
	self.screen_rect = Rect((0, 0,
		self.rect.width + self.margin_left + self.margin_right,
		self.rect.height + self.margin_top + self.margin_bottom
	))
	os.environ['SDL_VIDEO_CENTERED'] = '1'
	self.screen = display.set_mode(self.screen_rect.size)
	self.screen.fill(self.background_color)
	display.set_caption(self.caption)
	self.justify_elements()
	self.position_rects()
	for widget in self.widgets():
		self.screen.blit(widget.get_surface(), widget.rect)
	display.update()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.justify_elements">
    <p>def <span class="ident">justify_elements</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Expand the area allowed to each element so that they fill available space.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.justify_elements', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.justify_elements" class="source">
    <pre><code>def justify_elements(self):
	"""
	Expand the area allowed to each element so that they fill available space.
	"""
	content_height = sum(element.rect.height for element in self.elements)
	target_content_height = self.rect.height - self.__internal_margins
	grow_factor = float(target_content_height) / float(content_height)
	for element in self.elements:
		element.rect.width = self.rect.width
		element.rect.height = round(element.rect.height * grow_factor)
		if isinstance(element, Layout): element.justify_elements()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.last_focusable_widget">
    <p>def <span class="ident">last_focusable_widget</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the last Widget, irrespective of container.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.last_focusable_widget', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.last_focusable_widget" class="source">
    <pre><code>def last_focusable_widget(self):
	"""
	Returns the last Widget, irrespective of container.
	"""
	for e in self.focusable_widgets(): pass
	return e
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.loop_end">
    <p>def <span class="ident">loop_end</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Function called each time through Dialog._main_loop()</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.loop_end', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.loop_end" class="source">
    <pre><code>def loop_end(self):
	"""
	Function called each time through Dialog._main_loop()
	"""
	if self.messenger:
		if self.messenger.closed:
			self.statusbar.text = "Connection to %s closed" % (self.messenger.remote_ip)
		else:
			if self.messenger.id_sent and self.messenger.id_received:
				self.statusbar.text = "%s at %s connected" % (self.messenger.remote_user, self.messenger.remote_hostname)
				self.close()
			elif not self.messenger.id_sent:
				self.statusbar.text = "Connected to %s" % (self.messenger.remote_ip)
				self.messenger.send(MsgIdentify())
				self.messenger.id_sent = True
			self.messenger.xfer()
			message = self.messenger.get()
			if message is not None:
				if isinstance(message, MsgIdentify):
					self.messenger.id_received = True
					self.messenger.remote_hostname = message.hostname
					self.messenger.remote_user = message.username
				else:
					self.__connector.cancel()
					err = "Messenger received an unexpected message: " + message.__class__.__name__
					logging.error(err)
					self.statusbar.text = err
	elif self.__connect_failed:
		# Only happens when connector thread faults out.
		self.close()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.loop_start">
    <p>def <span class="ident">loop_start</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Called at the beginning of _main_loop() each time through, before processing events.
The event loop looks like this:
1. loop_start()                              &lt;-- you are here
2. event handling (keyboard, mouse, timers)
3. loop_end()
4. repaint the dialog
5. update the display</p>
<p>This function does nothing, and is meant for being overriden by a subclass.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.loop_start', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.loop_start" class="source">
    <pre><code>def loop_start(self):
	"""
	Called at the beginning of _main_loop() each time through, before processing events.
	The event loop looks like this:
	1. loop_start()                              <-- you are here
	2. event handling (keyboard, mouse, timers)
	3. loop_end()
	4. repaint the dialog
	5. update the display
	This function does nothing, and is meant for being overriden by a subclass.
	"""
	pass
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.mode_select">
    <p>def <span class="ident">mode_select</span>(</p><p>self, radio)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.mode_select', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.mode_select" class="source">
    <pre><code>def mode_select(self, radio):
	if radio.text == "Client":
		self.ip_entry.enabled = True
		self.start_button.enabled = re.match("^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$", self.ip_entry.text)
	else:
		self.ip_entry.enabled = False
		self.start_button.enabled = True
		self.ip_entry.text = get_my_ip()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.position_next_element">
    <p>def <span class="ident">position_next_element</span>(</p><p>self, prev_element, next_elem)</p>
    </div>
    

    
  
    <div class="desc"><p>Shift next_elem's rect by the height of prev_element's rect, plus margin.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.position_next_element', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.position_next_element" class="source">
    <pre><code>def position_next_element(self, prev_element, next_elem):
	"""
	Shift next_elem's rect by the height of prev_element's rect, plus margin.
	"""
	next_elem.rect.top = prev_element.rect.top + prev_element.rect.height + \
		max(prev_element.margin_bottom, next_elem.margin_top)
	next_elem.rect.left = prev_element.rect.left
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.position_rects">
    <p>def <span class="ident">position_rects</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the final top, left position of contained elements.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.position_rects', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.position_rects" class="source">
    <pre><code>def position_rects(self):
	"""
	Set the final top, left position of contained elements.
	"""
	prev_elem = self.elements[0]
	prev_elem.rect.top = self.rect.top
	prev_elem.rect.left = self.rect.left
	for next_elem in self.elements[1:]:
		self.position_next_element(prev_elem, next_elem)
		prev_elem = next_elem
	for element in self.elements:
		if isinstance(element, Layout):
			element.position_rects()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.server_connect">
    <p>def <span class="ident">server_connect</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.server_connect', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.server_connect" class="source">
    <pre><code>def server_connect(self):
	self.__connect(DirectServer(self.tcp_port, self.ip_entry.text))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.set_caption">
    <p>def <span class="ident">set_caption</span>(</p><p>self, caption)</p>
    </div>
    

    
  
    <div class="desc"><p>Sets the window caption.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.set_caption', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.set_caption" class="source">
    <pre><code>def set_caption(self, caption):
	"""
	Sets the window caption.
	"""
	self.caption = caption
	return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.show">
    <p>def <span class="ident">show</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize the display and enter the event loop.
The display is destroyed when this function exits.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.show', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.show" class="source">
    <pre><code>def show(self):
	self.initialize_display()
	self._main_loop()
	self._connect_enable = False
	if self.__connect_thread: self.__connect_thread.join()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.start">
    <p>def <span class="ident">start</span>(</p><p>self, pos)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.start', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.start" class="source">
    <pre><code>def start(self, pos):
	if Radio.selected_value("mode") == "Client":
		if re.match("^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$", self.ip_entry.text):
			self.disable_widgets()
			self.__connect_thread = threading.Thread(target=self.client_connect)
			self.statusbar.text = "Connecting to %s ..." % self.ip_entry.text
		else:
			self.ip_entry.focus()
			self.statusbar.text = "Enter a valid ip address"
			return
	else:
		self.disable_widgets()
		self.__connect_thread = threading.Thread(target=self.server_connect)
		self.statusbar.text = "Listening for client connection ..."
	self.__connect_thread.start()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.widget_at">
    <p>def <span class="ident">widget_at</span>(</p><p>self, pos)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the Widget at the given screen position (which is usually the mouse position).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.widget_at', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.widget_at" class="source">
    <pre><code>def widget_at(self, pos):
	"""
	Returns the Widget at the given screen position (which is usually the mouse position).
	"""
	for element in self.elements:
		if element.rect.collidepoint(pos):
			return element if isinstance(element, Widget) else element.widget_at(pos)
	return None
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.DirectJoiner.widgets">
    <p>def <span class="ident">widgets</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>A generator function which yields all the Widget instances contained in this Layout.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.DirectJoiner.widgets', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.DirectJoiner.widgets" class="source">
    <pre><code>def widgets(self):
	"""
	A generator function which yields all the Widget instances contained in this Layout.
	"""
	for elem_a in self.elements:
		if isinstance(elem_a, Layout):
			for elem_b in elem_a.widgets():
				yield elem_b
		else:
			yield elem_a
</code></pre>
  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="legame.joiner.DirectJoiner.ip_entry" class="name">var <span class="ident">ip_entry</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.DirectJoiner.messenger" class="name">var <span class="ident">messenger</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.DirectJoiner.start_button" class="name">var <span class="ident">start_button</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="legame.joiner.JoinerDialog" class="name">class <span class="ident">JoinerDialog</span></p>
      
  
    <div class="desc"><p>Base class of dialog which allows the user to connect to another player over the network.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog" class="source">
    <pre><code>class JoinerDialog(Dialog):
	"""
	Base class of dialog which allows the user to connect to another player over the network.
	"""

	transport					= "json"
	caption						= "Select a game to join"
	background_color			= (20,20,80)
	background_color_disabled	= (0,0,40)
	foreground_color			= (180,180,255)
	foreground_color_hover		= (220,220,255)
	shutdown_delay				= 0.5


	def __init__(self, options=None):
		"""
		The "options" argument is expected to be a dictionary, the items of which are
		set as attributes of the game during initialization. Some appropriate key/value
		pairs to pass to the __init__ function would be:

			client
			server
			tcp_port
			udp_port
			transport

		"""
		if options is not None:
			for varname, value in options.__dict__.items():
				setattr(self, varname, value)
		Dialog.__init__(self)
		module = importlib.import_module("cable_car.%s_messages" % self.transport)
		globals().update({ name: module.__dict__[name] for name in module.__dict__})
		Message.register_messages()
		self.statusbar = Label(
			"",
			align = ALIGN_LEFT,
			font_size = 15,
			width = 540,
			foreground_color = self.foreground_color,
			background_color = self.background_color
		)


	def close(self):
		"""
		Override Dialog.close()
		Turn off "_connect_enable" so that connection threads exit.
		Sets up a pause before closing when "shutdown_delay" is not zero.
		"""
		self._connect_enable = False
		self._quitting_time = time() + self.shutdown_delay
		self.loop_end = self._closing


	def _closing(self):
		"""
		Function which replaces "loop_end" when closing JoinerDialog.
		Inserts a pause before killing the main loop, closing the dialog.
		"""
		if time() >= self._quitting_time:
			self._run_loop = False
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#legame.joiner.JoinerDialog">JoinerDialog</a></li>
          <li>pygame_dialog.pygame_dialog.Dialog</li>
          <li>pygame_dialog.pygame_dialog.VerticalLayout</li>
          <li>pygame_dialog.pygame_dialog.LinearLayout</li>
          <li>pygame_dialog.pygame_dialog.Layout</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="legame.joiner.JoinerDialog.background_color" class="name">var <span class="ident">background_color</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.JoinerDialog.background_color_disabled" class="name">var <span class="ident">background_color_disabled</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.JoinerDialog.caption" class="name">var <span class="ident">caption</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.JoinerDialog.foreground_color" class="name">var <span class="ident">foreground_color</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.JoinerDialog.foreground_color_hover" class="name">var <span class="ident">foreground_color_hover</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.JoinerDialog.rect" class="name">var <span class="ident">rect</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.JoinerDialog.shutdown_delay" class="name">var <span class="ident">shutdown_delay</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="legame.joiner.JoinerDialog.transport" class="name">var <span class="ident">transport</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="legame.joiner.JoinerDialog.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>The "options" argument is expected to be a dictionary, the items of which are
set as attributes of the game during initialization. Some appropriate key/value
pairs to pass to the <strong>init</strong> function would be:</p>
<pre><code>    client
    server
    tcp_port
    udp_port
    transport
</code></pre></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog.__init__', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog.__init__" class="source">
    <pre><code>def __init__(self, options=None):
	"""
	The "options" argument is expected to be a dictionary, the items of which are
	set as attributes of the game during initialization. Some appropriate key/value
	pairs to pass to the __init__ function would be:
		client
		server
		tcp_port
		udp_port
		transport
	"""
	if options is not None:
		for varname, value in options.__dict__.items():
			setattr(self, varname, value)
	Dialog.__init__(self)
	module = importlib.import_module("cable_car.%s_messages" % self.transport)
	globals().update({ name: module.__dict__[name] for name in module.__dict__})
	Message.register_messages()
	self.statusbar = Label(
		"",
		align = ALIGN_LEFT,
		font_size = 15,
		width = 540,
		foreground_color = self.foreground_color,
		background_color = self.background_color
	)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.JoinerDialog.append">
    <p>def <span class="ident">append</span>(</p><p>self, arg)</p>
    </div>
    

    
  
    <div class="desc"><p>Add a Widget or Layout to this LinearLayout.
Returns this LinearLayout.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog.append', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog.append" class="source">
    <pre><code>def append(self, arg):
	"""
	Add a Widget or Layout to this LinearLayout.
	Returns this LinearLayout.
	"""
	self.elements.append(arg)
	return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.JoinerDialog.close">
    <p>def <span class="ident">close</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Override Dialog.close()
Turn off "_connect_enable" so that connection threads exit.
Sets up a pause before closing when "shutdown_delay" is not zero.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog.close', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog.close" class="source">
    <pre><code>def close(self):
	"""
	Override Dialog.close()
	Turn off "_connect_enable" so that connection threads exit.
	Sets up a pause before closing when "shutdown_delay" is not zero.
	"""
	self._connect_enable = False
	self._quitting_time = time() + self.shutdown_delay
	self.loop_end = self._closing
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.JoinerDialog.dump">
    <p>def <span class="ident">dump</span>(</p><p>self, indent=0)</p>
    </div>
    

    
  
    <div class="desc"><p>Print this layout's element tree for debugging.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog.dump', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog.dump" class="source">
    <pre><code>def dump(self, indent=0):
	"""
	Print this layout's element tree for debugging.
	"""
	if self.rect is None:
		self.get_initial_rect()
		self.justify_elements()
		self.position_rects()
	super(Dialog, self).dump(indent)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.JoinerDialog.first_focusable_widget">
    <p>def <span class="ident">first_focusable_widget</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the first Widget, irrespective of container.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog.first_focusable_widget', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog.first_focusable_widget" class="source">
    <pre><code>def first_focusable_widget(self):
	"""
	Returns the first Widget, irrespective of container.
	"""
	for e in self.focusable_widgets(): return e
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.JoinerDialog.focusable_widget_after">
    <p>def <span class="ident">focusable_widget_after</span>(</p><p>self, widget)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the Widget following widget, irrespective of container.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog.focusable_widget_after', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog.focusable_widget_after" class="source">
    <pre><code>def focusable_widget_after(self, widget):
	"""
	Returns the Widget following widget, irrespective of container.
	"""
	elem_found = False
	for e in self.focusable_widgets():
		if elem_found:
			return e
		elif e is widget:
			elem_found = True
	return None
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.JoinerDialog.focusable_widget_before">
    <p>def <span class="ident">focusable_widget_before</span>(</p><p>self, widget)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the Widget preceeding widget, irrespective of container.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog.focusable_widget_before', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog.focusable_widget_before" class="source">
    <pre><code>def focusable_widget_before(self, widget):
	"""
	Returns the Widget preceeding widget, irrespective of container.
	"""
	prev = None
	for e in self.focusable_widgets():
		if e is widget:
			return prev
		prev = e
	return None
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.JoinerDialog.focusable_widgets">
    <p>def <span class="ident">focusable_widgets</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a list of widgets contained in this layout which may receieve the focus.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog.focusable_widgets', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog.focusable_widgets" class="source">
    <pre><code>def focusable_widgets(self):
	"""
	Returns a list of widgets contained in this layout which may receieve the focus.
	"""
	return filter(lambda elem: not isinstance(elem, Label) and not elem.disabled, self.widgets())
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.JoinerDialog.get_initial_rect">
    <p>def <span class="ident">get_initial_rect</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Determine the minimum space necessary for this element and its' contained elements.
Returns Rect</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog.get_initial_rect', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog.get_initial_rect" class="source">
    <pre><code>def get_initial_rect(self):
	"""
	Determine the minimum space necessary for this element and its' contained elements.
	Returns Rect
	"""
	VerticalLayout.get_initial_rect(self)
	self.rect.left = self.margin_left
	self.rect.top = self.margin_top
	return self.rect
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.JoinerDialog.initialize_display">
    <p>def <span class="ident">initialize_display</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize the pygame display and do initial render.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog.initialize_display', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog.initialize_display" class="source">
    <pre><code>def initialize_display(self):
	"""
	Initialize the pygame display and do initial render.
	"""
	display.init()
	self.rect = self.get_initial_rect()
	self.screen_rect = Rect((0, 0,
		self.rect.width + self.margin_left + self.margin_right,
		self.rect.height + self.margin_top + self.margin_bottom
	))
	os.environ['SDL_VIDEO_CENTERED'] = '1'
	self.screen = display.set_mode(self.screen_rect.size)
	self.screen.fill(self.background_color)
	display.set_caption(self.caption)
	self.justify_elements()
	self.position_rects()
	for widget in self.widgets():
		self.screen.blit(widget.get_surface(), widget.rect)
	display.update()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.JoinerDialog.justify_elements">
    <p>def <span class="ident">justify_elements</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Expand the area allowed to each element so that they fill available space.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog.justify_elements', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog.justify_elements" class="source">
    <pre><code>def justify_elements(self):
	"""
	Expand the area allowed to each element so that they fill available space.
	"""
	content_height = sum(element.rect.height for element in self.elements)
	target_content_height = self.rect.height - self.__internal_margins
	grow_factor = float(target_content_height) / float(content_height)
	for element in self.elements:
		element.rect.width = self.rect.width
		element.rect.height = round(element.rect.height * grow_factor)
		if isinstance(element, Layout): element.justify_elements()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.JoinerDialog.last_focusable_widget">
    <p>def <span class="ident">last_focusable_widget</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the last Widget, irrespective of container.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog.last_focusable_widget', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog.last_focusable_widget" class="source">
    <pre><code>def last_focusable_widget(self):
	"""
	Returns the last Widget, irrespective of container.
	"""
	for e in self.focusable_widgets(): pass
	return e
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.JoinerDialog.loop_end">
    <p>def <span class="ident">loop_end</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Called at the end of _main_loop() each time through.
The event loop looks like this:
1. loop_start()
2. event handling (keyboard, mouse, timers)
3. loop_end()                                &lt;-- you are here
4. repaint the dialog
5. update the display</p>
<p>This function does nothing, and is meant for being overriden by a subclass.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog.loop_end', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog.loop_end" class="source">
    <pre><code>def loop_end(self):
	"""
	Called at the end of _main_loop() each time through.
	The event loop looks like this:
	1. loop_start()
	2. event handling (keyboard, mouse, timers)
	3. loop_end()                                <-- you are here
	4. repaint the dialog
	5. update the display
	This function does nothing, and is meant for being overriden by a subclass.
	"""
	pass
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.JoinerDialog.loop_start">
    <p>def <span class="ident">loop_start</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Called at the beginning of _main_loop() each time through, before processing events.
The event loop looks like this:
1. loop_start()                              &lt;-- you are here
2. event handling (keyboard, mouse, timers)
3. loop_end()
4. repaint the dialog
5. update the display</p>
<p>This function does nothing, and is meant for being overriden by a subclass.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog.loop_start', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog.loop_start" class="source">
    <pre><code>def loop_start(self):
	"""
	Called at the beginning of _main_loop() each time through, before processing events.
	The event loop looks like this:
	1. loop_start()                              <-- you are here
	2. event handling (keyboard, mouse, timers)
	3. loop_end()
	4. repaint the dialog
	5. update the display
	This function does nothing, and is meant for being overriden by a subclass.
	"""
	pass
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.JoinerDialog.position_next_element">
    <p>def <span class="ident">position_next_element</span>(</p><p>self, prev_element, next_elem)</p>
    </div>
    

    
  
    <div class="desc"><p>Shift next_elem's rect by the height of prev_element's rect, plus margin.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog.position_next_element', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog.position_next_element" class="source">
    <pre><code>def position_next_element(self, prev_element, next_elem):
	"""
	Shift next_elem's rect by the height of prev_element's rect, plus margin.
	"""
	next_elem.rect.top = prev_element.rect.top + prev_element.rect.height + \
		max(prev_element.margin_bottom, next_elem.margin_top)
	next_elem.rect.left = prev_element.rect.left
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.JoinerDialog.position_rects">
    <p>def <span class="ident">position_rects</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the final top, left position of contained elements.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog.position_rects', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog.position_rects" class="source">
    <pre><code>def position_rects(self):
	"""
	Set the final top, left position of contained elements.
	"""
	prev_elem = self.elements[0]
	prev_elem.rect.top = self.rect.top
	prev_elem.rect.left = self.rect.left
	for next_elem in self.elements[1:]:
		self.position_next_element(prev_elem, next_elem)
		prev_elem = next_elem
	for element in self.elements:
		if isinstance(element, Layout):
			element.position_rects()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.JoinerDialog.set_caption">
    <p>def <span class="ident">set_caption</span>(</p><p>self, caption)</p>
    </div>
    

    
  
    <div class="desc"><p>Sets the window caption.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog.set_caption', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog.set_caption" class="source">
    <pre><code>def set_caption(self, caption):
	"""
	Sets the window caption.
	"""
	self.caption = caption
	return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.JoinerDialog.show">
    <p>def <span class="ident">show</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize the display and enter the event loop.
The display is destroyed when this function exits.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog.show', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog.show" class="source">
    <pre><code>def show(self):
	"""
	Initialize the display and enter the event loop.
	The display is destroyed when this function exits.
	"""
	self.initialize_display()
	self._main_loop()
	display.quit()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.JoinerDialog.widget_at">
    <p>def <span class="ident">widget_at</span>(</p><p>self, pos)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the Widget at the given screen position (which is usually the mouse position).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog.widget_at', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog.widget_at" class="source">
    <pre><code>def widget_at(self, pos):
	"""
	Returns the Widget at the given screen position (which is usually the mouse position).
	"""
	for element in self.elements:
		if element.rect.collidepoint(pos):
			return element if isinstance(element, Widget) else element.widget_at(pos)
	return None
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="legame.joiner.JoinerDialog.widgets">
    <p>def <span class="ident">widgets</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>A generator function which yields all the Widget instances contained in this Layout.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-legame.joiner.JoinerDialog.widgets', this);">Show source &equiv;</a></p>
  <div id="source-legame.joiner.JoinerDialog.widgets" class="source">
    <pre><code>def widgets(self):
	"""
	A generator function which yields all the Widget instances contained in this Layout.
	"""
	for elem_a in self.elements:
		if isinstance(elem_a, Layout):
			for elem_b in elem_a.widgets():
				yield elem_b
		else:
			yield elem_a
</code></pre>
  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="legame.joiner.JoinerDialog.statusbar" class="name">var <span class="ident">statusbar</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
</body>
</html>
